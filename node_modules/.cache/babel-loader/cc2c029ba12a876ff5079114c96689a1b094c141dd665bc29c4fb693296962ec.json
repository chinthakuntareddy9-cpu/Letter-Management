{"ast":null,"code":"var _jsxFileName = \"D:\\\\React\\\\project\\\\withoutnode_new\\\\src\\\\shared\\\\components\\\\language-selector\\\\LanguageSelector.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useRef, useEffect, useMemo } from \"react\";\nimport \"./LanguageSelector.css\";\nimport { useTranslation } from \"react-i18next\";\nimport { setLanguage } from \"../../../i18n\"; // adjust path if needed\n\n// Optional: map language codes to the translation keys used for display names.\n// (Keeps labels fully sourced from translation.json via t('newLetter.language.*'))\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LABEL_KEYS = {\n  en: \"newLetter.language.english\",\n  nl: \"newLetter.language.dutch\",\n  fr: \"newLetter.language.french\"\n};\nconst LanguageSelector = () => {\n  _s();\n  var _i18n$options2, _i18n$language;\n  const {\n    t,\n    i18n\n  } = useTranslation();\n  const containerRef = useRef(null);\n\n  // Derive supported languages from i18n config (no hardcoding)\n  const supportedLngs = useMemo(() => {\n    var _i18n$options$resourc, _i18n$options;\n    const res = (_i18n$options$resourc = i18n === null || i18n === void 0 ? void 0 : (_i18n$options = i18n.options) === null || _i18n$options === void 0 ? void 0 : _i18n$options.resources) !== null && _i18n$options$resourc !== void 0 ? _i18n$options$resourc : {};\n    return Object.keys(res); // ['en','nl','fr']\n  }, [i18n === null || i18n === void 0 ? void 0 : (_i18n$options2 = i18n.options) === null || _i18n$options2 === void 0 ? void 0 : _i18n$options2.resources]);\n\n  // Selected label is derived from current i18n.language\n  const [open, setOpen] = useState(false);\n  const selectedLng = ((_i18n$language = i18n.language) === null || _i18n$language === void 0 ? void 0 : _i18n$language.split(\"-\")[0]) || \"en\"; // normalize en-US -> en\n\n  // Close when clicking outside\n  useEffect(() => {\n    const onDocClick = e => {\n      if (containerRef.current && !containerRef.current.contains(e.target)) {\n        setOpen(false);\n      }\n    };\n    document.addEventListener(\"mousedown\", onDocClick);\n    return () => document.removeEventListener(\"mousedown\", onDocClick);\n  }, []);\n  const handleToggle = () => setOpen(prev => !prev);\n  const handleSelect = lng => {\n    setLanguage(lng); // persists and updates <html lang=\"\">\n    setOpen(false);\n  };\n\n  // Helper: get the localized label for a language code from translation.json\n  const getLabelForLng = lng => {\n    const key = LABEL_KEYS[lng];\n    if (!key) return lng; // fallback if a code has no label key\n    // Use defaultValue so UI doesn't break if the key is missing in a locale\n    return t(key, {\n      defaultValue: lng\n    });\n  };\n\n  // The visible selected label\n  const selectedLabel = getLabelForLng(selectedLng);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"language-selector\",\n    ref: containerRef,\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      className: \"language-trigger\",\n      onClick: handleToggle,\n      \"aria-haspopup\": \"listbox\",\n      \"aria-expanded\": open,\n      \"aria-label\": t(\"language.select\", {\n        defaultValue: `Selected language: ${selectedLabel}. Open language list.`\n      }),\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"selected-language\",\n        children: selectedLabel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n        className: `fa-solid fa-angle-${open ? \"up\" : \"down\"}`,\n        \"aria-hidden\": \"true\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), open && /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"language-flyout\",\n      role: \"listbox\",\n      \"aria-label\": t(\"language.select\", {\n        defaultValue: \"Choose a language\"\n      }),\n      children: supportedLngs.map(lng => {\n        const label = getLabelForLng(lng);\n        const isActive = selectedLng === lng;\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            role: \"option\",\n            \"aria-selected\": isActive,\n            className: `language-option ${isActive ? \"is-active\" : \"\"}`,\n            onClick: () => handleSelect(lng),\n            children: label\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 17\n          }, this)\n        }, lng, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 15\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n};\n_s(LanguageSelector, \"RYhYoomxh98y9UbWCV0u+klmOKc=\", false, function () {\n  return [useTranslation];\n});\n_c = LanguageSelector;\nexport default LanguageSelector;\nvar _c;\n$RefreshReg$(_c, \"LanguageSelector\");","map":{"version":3,"names":["useState","useRef","useEffect","useMemo","useTranslation","setLanguage","jsxDEV","_jsxDEV","LABEL_KEYS","en","nl","fr","LanguageSelector","_s","_i18n$options2","_i18n$language","t","i18n","containerRef","supportedLngs","_i18n$options$resourc","_i18n$options","res","options","resources","Object","keys","open","setOpen","selectedLng","language","split","onDocClick","e","current","contains","target","document","addEventListener","removeEventListener","handleToggle","prev","handleSelect","lng","getLabelForLng","key","defaultValue","selectedLabel","className","ref","children","type","onClick","fileName","_jsxFileName","lineNumber","columnNumber","role","map","label","isActive","_c","$RefreshReg$"],"sources":["D:/React/project/withoutnode_new/src/shared/components/language-selector/LanguageSelector.jsx"],"sourcesContent":["import { useState, useRef, useEffect, useMemo } from \"react\";\r\nimport \"./LanguageSelector.css\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { setLanguage } from \"../../../i18n\"; // adjust path if needed\r\n\r\n// Optional: map language codes to the translation keys used for display names.\r\n// (Keeps labels fully sourced from translation.json via t('newLetter.language.*'))\r\nconst LABEL_KEYS = {\r\n  en: \"newLetter.language.english\",\r\n  nl: \"newLetter.language.dutch\",\r\n  fr: \"newLetter.language.french\",\r\n};\r\n\r\nconst LanguageSelector = () => {\r\n  const { t, i18n } = useTranslation();\r\n  const containerRef = useRef(null);\r\n\r\n  // Derive supported languages from i18n config (no hardcoding)\r\n  const supportedLngs = useMemo(() => {\r\n    const res = i18n?.options?.resources ?? {};\r\n    return Object.keys(res); // ['en','nl','fr']\r\n  }, [i18n?.options?.resources]);\r\n\r\n  // Selected label is derived from current i18n.language\r\n  const [open, setOpen] = useState(false);\r\n  const selectedLng = i18n.language?.split(\"-\")[0] || \"en\"; // normalize en-US -> en\r\n\r\n  // Close when clicking outside\r\n  useEffect(() => {\r\n    const onDocClick = (e) => {\r\n      if (containerRef.current && !containerRef.current.contains(e.target)) {\r\n        setOpen(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", onDocClick);\r\n    return () => document.removeEventListener(\"mousedown\", onDocClick);\r\n  }, []);\r\n\r\n  const handleToggle = () => setOpen((prev) => !prev);\r\n\r\n  const handleSelect = (lng) => {\r\n    setLanguage(lng); // persists and updates <html lang=\"\">\r\n    setOpen(false);\r\n  };\r\n\r\n  // Helper: get the localized label for a language code from translation.json\r\n  const getLabelForLng = (lng) => {\r\n    const key = LABEL_KEYS[lng];\r\n    if (!key) return lng; // fallback if a code has no label key\r\n    // Use defaultValue so UI doesn't break if the key is missing in a locale\r\n    return t(key, { defaultValue: lng });\r\n  };\r\n\r\n  // The visible selected label\r\n  const selectedLabel = getLabelForLng(selectedLng);\r\n\r\n  return (\r\n    <div className=\"language-selector\" ref={containerRef}>\r\n      <button\r\n        type=\"button\"\r\n        className=\"language-trigger\"\r\n        onClick={handleToggle}\r\n        aria-haspopup=\"listbox\"\r\n        aria-expanded={open}\r\n        aria-label={t(\"language.select\", {\r\n          defaultValue: `Selected language: ${selectedLabel}. Open language list.`,\r\n        })}\r\n      >\r\n        <span className=\"selected-language\">{selectedLabel}</span>\r\n        <i\r\n          className={`fa-solid fa-angle-${open ? \"up\" : \"down\"}`}\r\n          aria-hidden=\"true\"\r\n        />\r\n      </button>\r\n\r\n      {open && (\r\n        <ul\r\n          className=\"language-flyout\"\r\n          role=\"listbox\"\r\n          aria-label={t(\"language.select\", {\r\n            defaultValue: \"Choose a language\",\r\n          })}\r\n        >\r\n          {supportedLngs.map((lng) => {\r\n            const label = getLabelForLng(lng);\r\n            const isActive = selectedLng === lng;\r\n            return (\r\n              <li key={lng}>\r\n                <button\r\n                  type=\"button\"\r\n                  role=\"option\"\r\n                  aria-selected={isActive}\r\n                  className={`language-option ${isActive ? \"is-active\" : \"\"}`}\r\n                  onClick={() => handleSelect(lng)}\r\n                >\r\n                  {label}\r\n                </button>\r\n              </li>\r\n            );\r\n          })}\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LanguageSelector;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}